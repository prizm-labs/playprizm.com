<!DOCTYPE html>
<html class="no-js">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <title></title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width">

        <link rel="stylesheet" href="/static/css/bootstrap.css">
        <style>
            body {
                padding-top: 50px;
                padding-bottom: 20px;
            }
        </style>
        <link rel="stylesheet" href="/static/css/bootstrap-theme.css">
        <link rel="stylesheet" href="/static/css/main.css">
        <script src="/static/js/vendor/modernizr-2.6.2.js"></script>

        <!-- start Mixpanel --><script type="text/javascript">(function(e,a){if(!a.__SV){var b=window;try{var c,l,i,j=b.location,g=j.hash;c=function(a,b){return(l=a.match(RegExp(b+"=([^&]*)")))?l[1]:null};g&&c(g,"state")&&(i=JSON.parse(decodeURIComponent(c(g,"state"))),"mpeditor"===i.action&&(b.sessionStorage.setItem("_mpcehash",g),history.replaceState(i.desiredHash||"",e.title,j.pathname+j.search)))}catch(m){}var k,h;window.mixpanel=a;a._i=[];a.init=function(b,c,f){function e(b,a){var c=a.split(".");2==c.length&&(b=b[c[0]],a=c[1]);b[a]=function(){b.push([a].concat(Array.prototype.slice.call(arguments,
0)))}}var d=a;"undefined"!==typeof f?d=a[f]=[]:f="mixpanel";d.people=d.people||[];d.toString=function(b){var a="mixpanel";"mixpanel"!==f&&(a+="."+f);b||(a+=" (stub)");return a};d.people.toString=function(){return d.toString(1)+".people (stub)"};k="disable time_event track track_pageview track_links track_forms register register_once alias unregister identify name_tag set_config reset people.set people.set_once people.increment people.append people.union people.track_charge people.clear_charges people.delete_user".split(" ");
for(h=0;h<k.length;h++)e(d,k[h]);a._i.push([b,c,f])};a.__SV=1.2;b=e.createElement("script");b.type="text/javascript";b.async=!0;b.src="undefined"!==typeof MIXPANEL_CUSTOM_LIB_URL?MIXPANEL_CUSTOM_LIB_URL:"file:"===e.location.protocol&&"//cdn.mxpnl.com/libs/mixpanel-2-latest.min.js".match(/^\/\//)?"https://cdn.mxpnl.com/libs/mixpanel-2-latest.min.js":"//cdn.mxpnl.com/libs/mixpanel-2-latest.min.js";c=e.getElementsByTagName("script")[0];c.parentNode.insertBefore(b,c)}})(document,window.mixpanel||[]);
mixpanel.init("87290bc0165c3e5bfbd8d56a03ea9c56");</script><!-- end Mixpanel -->
   
    <!-- -->

    <!-- -->

    <!-- CROSS BROWSER REFERRER TRACKING -->
    <script src="/static/js/bundle.js"></script>
    <!-- END -->
    
<!-- Facebook Pixel Code -->
<script>
!function(f,b,e,v,n,t,s){if(f.fbq)return;n=f.fbq=function(){n.callMethod?
n.callMethod.apply(n,arguments):n.queue.push(arguments)};if(!f._fbq)f._fbq=n;
n.push=n;n.loaded=!0;n.version='2.0';n.queue=[];t=b.createElement(e);t.async=!0;
t.src=v;s=b.getElementsByTagName(e)[0];s.parentNode.insertBefore(t,s)}(window,
document,'script','https://connect.facebook.net/en_US/fbevents.js');
fbq('init', '1105825709482879', {
em: 'insert_email_variable,'
});

fbq('track', 'PageView');
fbq('track', 'Lead');
// fbq('track', 'AddToCart');
// fbq('track', 'InitiateCheckout');
// fbq('track', 'Purchase', {value: '0.00', currency: 'USD'});
// fbq('track', 'CompleteRegistration');
</script>
<noscript><img height="1" width="1" style="display:none"
src="https://www.facebook.com/tr?id=1105825709482879&ev=PageView&noscript=1"
/></noscript>
<!-- DO NOT MODIFY -->
<!-- End Facebook Pixel Code -->

<link rel="stylesheet" href="/static/css/card.css">
<style type="text/css" media="screen">

   .has-error input {
      border-width: 2px;
      border-color: red;
    }

    .validation {
      text-align: center;
      font-style: italic;
      font-size: 16px;
    }


  </style>

  <script src="/static/js/vendor/jquery/dist/jquery.min.js"></script>
<script type="text/javascript" src="https://js.stripe.com/v2/">
</script>
<script type="text/javascript">
  Stripe.setPublishableKey('pk_live_xQ2fYNh0HYepIrkFgBmOJjwX');
  //Stripe.setPublishableKey('pk_test_PuLQys0szummwlWo9wygNp0P');
</script>
 
    </head>

    <body>
    <div class="navbar navbar-inverse navbar-fixed-top">
      <div class="container">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="/">Project name</a>
        </div>
      </div>
    </div>

    
<script>mixpanel.track("reserve",trackingInfo);</script>
<div class="container">

    <div class="demo-container">

            <div class="card-wrapper"></div>

            <div class="form-container active">
                <form id="stripe-payment" novalidate autocomplete="on" action="https://reserve.playtable.xyz/charge" method="POST">
                    <div class="row collapse">
                        <div class="small-12 columns">
                           <div class="form-group">
                            <label for="cc-email" class="control-label">Email</label>
                            <input placeholder="Email" name="stripeEmail" type="text" class="cc-email" id="cc-email" required>
                            </div>
                        </div>
                    </div>
                    <div class="row collapse">
                        <div class="small-6 columns">
                            <div class="form-group">
                            <label for="cc-number" class="control-label">Card Number</small></label>
                            <input id="cc-number" type="tel" autocomplete="cc-number" class="cc-number" placeholder="•••• •••• •••• ••••" data-stripe="number" required>
                            </div>
                        </div>
                        <div class="small-6 columns">
                             <div class="form-group">
                            <label for="cc-name" class="control-label">Full Name</label>
                            <input placeholder="Full name" name="name" type="text" class="cc-name" id="cc-name" required>
                            </div>
                        </div>
                    </div>
                    <div class="row collapse">
                        <div class="small-3 columns">
                            <div class="form-group">
                            <label for="cc-exp" class="control-label">Expiry</label>
                           <input id="cc-exp" type="tel" class="cc-exp" autocomplete="cc-exp" placeholder="MM / YYYY" data-stripe="exp" required>
                           </div>
                        </div>

                        <div class="small-3 columns">
                             <div class="form-group">
                            <label for="cc-cvc" class="control-label">CVC</label>
                            <input id="cc-cvc" type="tel" class="cc-cvc" autocomplete="off" placeholder="•••" data-stripe="cvc" required>
                            </div>
                        </div>

                        <div class="small-6 columns">
                           <div class="form-group">
                            <label for="cc-zip" class="control-label">Zip Code</label>
                            <input id="cc-zip" class="cc-zip" type="tel" placeholder="•••••" data-stripe="address_zip" required>
                            </div>
                        </div>
                    </div>
                    <div class="row collapse">
                        <div class="small-12 columns">
                            <input type="submit" value="Reserve Now" class="button postfix submit" id="payment-submit" disabled="true">
                        </div>
                    </div>

                    <input type="hidden" name="price" value="99"/>
                    <input type="hidden" name="sku" value="playtable-pro"/>
                    <input type="hidden" name="skuName" value="Playtable Pro"/>
                    <input type="hidden" name="ref" value="reserve"/>
                
                    <p class="validation"></p>
                </form>
            </div>
        </div>

      <script>
        
    jQuery(function($) {

      // Enable form submission
      var $form = $('#stripe-payment');
      $form.find('.submit').prop('disabled', false);

      $('form#stripe-payment').card({
            // a selector or DOM element for the container
            // where you want the card to appear
            container: '.card-wrapper',
            formSelectors: {
                numberInput: 'input#cc-number', // optional — default input[name="number"]
                expiryInput: 'input#cc-exp', // optional — default input[name="expiry"]
                cvcInput: 'input#cc-cvc', // optional — default input[name="cvc"]
                nameInput: 'input#cc-name' // optional - defaults input[name="name"]
            }
        });

      
      // Restrict the input values according to the field type
      $('.cc-zip').payment('restrictNumeric');

      // TODO: prevent conflict between card.js and payment.js
      // $('.cc-number').payment('formatCardNumber');

      $('.cc-exp').payment('formatCardExpiry');
      $('.cc-cvc').payment('formatCardCVC');


      $('form').submit(function(e) {
        
        // Prevent the form from being submitted:
        e.preventDefault();

        $('.validation').text("");
        $('.validation').removeClass('text-danger text-success');

        var cardType = $.payment.cardType($('.cc-number').val());
        console.log('card type ',cardType);

        $('.cc-email').toggleInputError($('.cc-email').validateEmail());

        $('.cc-number').toggleInputError(!$.payment.validateCardNumber($('.cc-number').val()));

        $('.cc-exp').toggleInputError(!$.payment.validateCardExpiry($('.cc-exp').payment('cardExpiryVal')));

        $('.cc-cvc').toggleInputError(!$.payment.validateCardCVC($('.cc-cvc').val(), cardType));

        $('.cc-name').toggleInputError($('.cc-name').validateName());
        $('.cc-zip').toggleInputError($('.cc-zip').validateZip());


        if ($('.has-error').length > 0) {

          showError("Please complete all fields correctly.")

        } else {
          var $form = $('#stripe-payment');
          $form.find('.submit').prop('disabled', true);

          Stripe.card.createToken($form, stripeResponseHandler);
        }

      
        return false;
      });

      console.log("document ready");

    });


    function showError( message ) {

      $('.validation').addClass('text-danger');
      $('.validation').text(message);
    }


    $.fn.validateName = function() {

      var val = this.val();

      var result = (typeof val == "undefined" || val == '' || val.length<3);
      console.log(result);

      return result;
    }

    $.fn.validateEmail = function() {
      var val = this.val();

      var r = /^.+@.+$/;
      
      var result = !r.test(val); // true
      console.log(result);

      return result;
    }


    $.fn.validateZip = function() {

      var val = this.val();

      var result = (typeof val == "undefined" || val == '' || val.length<5);
      console.log(result);

      return result;
    }


    $.fn.toggleInputError = function(erred) {
        this.parent('.form-group').toggleClass('has-error', erred);
        return this;
      };


    function stripeResponseHandler(status, response) {


      $.fn.toggleInputError = function(erred) {
        this.parent('.form-group').toggleClass('has-error', erred);
        return this;
      };

      // Grab the form:
      var $form = $('#stripe-payment');

      console.log(status);
      console.log(response);

      if (response.error) { // Problem!
        
        showError(response.error.message);

        // Show the errors on the form:

        // invalid_number  The card number is not a valid credit card number.
        // invalid_expiry_month  The card's expiration month is invalid.
        // invalid_expiry_year The card's expiration year is invalid.
        // invalid_cvc The card's security code is invalid.
        // incorrect_number  The card number is incorrect.
        // expired_card  The card has expired.
        // incorrect_cvc The card's security code is incorrect.
        // incorrect_zip The card's zip code failed validation.
        // card_declined The card was declined.
        // missing There is no card on a customer that is being charged.
        // processing_error

        switch (error.code) {   

          case "invalid_cvc":
          case "incorrect_cvc":
            $('.cc-cvc').toggleInputError(true);
          break;

          case "expired_card":
          case "invalid_expiry_year":
          case "invalid_expiry_month":
            $('.cc-exp').toggleInputError(true);
          break;

          case "incorrect_zip":
            $('.cc-zip').toggleInputError(true);
          break;

          case "missing":
            $('.cc-name').toggleInputError(true);
          break;

          case "invalid_number":
          case "incorrect_number":
          case "card_declined":
          case "processing_error":
          default:
            $('.cc-number').toggleInputError(true);
          break;

        }
        
        // Re-enable submission
        $form.find('.submit').prop('disabled', false); 


      } else { // Token was created!

        $('.form-group').removeClass('has-error');

        // Get the token ID:
        var token = response.id;

        // Insert the token ID into the form so it gets submitted to the server:
        $form.append($('<input type="hidden" name="stripeToken">').val(token));

        // Submit the form:
        console.log($form);
        $form.get(0).submit();
      }
    };
  </script>
</div>
<div class="container">
<!--   <form novalidate autocomplete="on" method="POST">
      <div class="form-group">
        <label for="cc-number" class="control-label">Card number formatting <small class="text-muted">[<span class="cc-brand"></span>]</small></label>
        <input id="cc-number" type="tel" class="input-lg form-control cc-number" autocomplete="cc-number" placeholder="•••• •••• •••• ••••" required>
      </div>

      <div class="form-group">
        <label for="cc-exp" class="control-label">Card expiry formatting</label>
        <input id="cc-exp" type="tel" class="input-lg form-control cc-exp" autocomplete="cc-exp" placeholder="•• / ••" required>
      </div>

      <div class="form-group">
        <label for="cc-cvc" class="control-label">Card CVC formatting</label>
        <input id="cc-cvc" type="tel" class="input-lg form-control cc-cvc" autocomplete="off" placeholder="•••" required>
      </div>

      <div class="form-group">
        <label for="numeric" class="control-label">Restrict numeric</label>
        <input id="numeric" type="tel" class="input-lg form-control" data-numeric>
      </div>

      <button type="submit" class="btn btn-lg btn-primary">Submit</button>

      <h2 class="validation"></h2>
    </form> -->
</div>
<div class="jumbotron">
  <div class="container">
    <h1>Reserve your Playtable today</h1>
    <p><a href="/checkout/">Reserve for $99</a></p>
    <p>
    <form action="https://reserve.playtable.xyz/charge" method="POST">
  <script
    src="https://checkout.stripe.com/checkout.js"
    class="stripe-button"
    data-key="pk_live_xQ2fYNh0HYepIrkFgBmOJjwX"
    data-image="https://daks2k3a4ib2z.cloudfront.net/56984253d9729c455c79b1aa/56afc0e25b54d73e04b38436_64.png"
    data-name="Reserve your Playtable Pro"
    data-description="Get 15% off your Playtable!"
    data-amount="99"
    data-label="Reserve Now"
    data-panel-label="Reserve for ">
  </script>
  <input type="hidden" name="price" value="99"/>
  <input type="hidden" name="sku" value="playtable-pro"/>
  <input type="hidden" name="skuName" value="Playtable Pro"/>
  <input type="hidden" name="ref" value="reserve"/>
</form>
    </p>
  </div>
</div>


<!-- <script src="https://checkout.stripe.com/checkout.js"></script> -->
<script src="/static/js/vendor/jquery.payment/lib/jquery.payment.js"></script>
<script src="/static/js/vendor/card/dist/jquery.card.js"></script>




    <script src="/static/js/vendor/jquery-1.10.1.js"></script>
    <script src="/static/js/vendor/bootstrap.js"></script>
    <script src="/static/js/main.js"></script>

    <!-- AWEBER CONVERSION TRACKING -->
<!--     <script type="text/javascript" src="//analytics.aweber.com/js/awt_analytics.js?id=1tBn."></script> -->
    <!-- END AWEBER CONVERSION TRACKING -->
  </body>

  
  
</html>
